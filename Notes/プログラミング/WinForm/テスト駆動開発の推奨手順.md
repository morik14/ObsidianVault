---
tags:
  - プログラミング
  - CSharp
  - ソースコード
---
# サンプルコード

## プロジェクトとテスト

### テストされる側

```c#
namespace TDD.WinForm.Objects
{
    // publicにする
    public class Calculation
    {
        public int Add(int a, int b)
        {
            return a + b;
        }
    }
}
```

### テストする側

```c#
namespace TDDTest.Tests
{
    [TestClass]
    public class UnitTest1
    {
        [TestMethod]
        public void TestMethod1()
        {
            var calculation = new TDD.WinForm.Objects.Calculation();
            int result = calculation.Add(5, 3);
            Assert.AreEqual(8, result);
        }
    }
}
```

## 手順

### テストコードを書く（レッドバー）

```c#
using TDD.WinForm.Objects;

namespace TDDTest.Tests
{
    [TestClass]
    public class UnitTest1
    {
        [TestMethod]
        public void 掛け算()
        {
            var calculation = new Calculation();
            int result = calculation.Multiplication(4, 2); // 未実装
            Assert.AreEqual(8, result);
        }
    }
}
```

### コンパイルエラーを取り除く

テストされる側のコンパイルエラーが出ているところで「Ctrl」+「.」
F12を押して見てみるとMultiplicationが実装がされている

```c#
namespace TDD.WinForm.Objects
{
    public class Calculation
    {
        public int Add(int a, int b)
        {
            return a + b;
        }

        // Ctrl + . で生成された部分
        public int Multiplication(int v1, int v2)
        {
            throw new NotImplementedException(); // 絶対にエラーになる
        }
    }
}
```
### テストコードを失敗させる

テストを実行すると間違いなく失敗する
それをパスするために実装コードを書くのが一番シンプルで無駄がない

### 実装する

```c#
namespace TDD.WinForm.Objects
{
    public class Calculation
    {
        public int Add(int a, int b)
        {
            return a + b;
        }

        public int Multiplication(int a, int b)
        {
            return a * b; // 実装した部分
        }
    }
}
```
### テストを成功させる（グリーンバー）

テストを実行させてグリーンバーを確認

## 勘違い2つ

テストと実装のサイクルは短く
単体テスト仕様書とは全くの別